$schema: https://azuremlschemas.azureedge.net/latest/pipelineJob.schema.json
type: pipeline
description: Azure Machine Learning pipeline with training, promotion, and prediction
compute: azureml:transformer-load-compute

jobs:

  train_job:
    type: command
    component: file:./train.yml
    outputs:
      logged_model: {type: mlflow_model}

  promote_job:
    type: command
    component: file:./promote.yml
    inputs:
      model_input: ${{parent.jobs.train_job.outputs.trained_model}}
    outputs:
      promoted_model: {type: mlflow_model}

  predict_job:
    type: command
    component: file:./predict.yml
    inputs:
      model_input: ${{parent.jobs.promote_job.outputs.promoted_model}}
    outputs:
      predictions: {type: uri_folder}
